<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ACE Support Bot</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
<style>
  
/* Style for the container */
.container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    text-align: center;
}

/* Style for the heading */
h1 {
    font-size: 24px;
    margin-bottom: 20px;
}

/* Style for the logout link */
a {
    display: inline-block;
    margin-bottom: 20px;
    text-decoration: none;
    color: #007bff;
    border-bottom: 1px solid #007bff;
}

a:hover {
    color: #0056b3;
    border-bottom-color: #0056b3;
}

/* Style for the form */
form {
    margin-top: 20px;
}

/* Style for the label */
label {
    display: block;
    margin-bottom: 10px;
    font-weight: bold;
}

/* Style for the input field */
input[type="list"] {
    width: 1000px; /* Adjust the width here */
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 3px;
    box-sizing: border-box;
}

/* Style for the submit button */
input[type="submit"] {
    width: 100%;
    padding: 10px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

input[type="submit"]:hover {
    background-color: #0056b3;
}


/* Style for the options in the dropdown list */
option {
    padding: 5px;
}


</style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>

  <div class="container">
    <h1>Welcome, {{ session['username'] }}</h1>
    <a href="{{ url_for('logout') }}">Logout</a>

    <form id="update-form">
      <label>Choose an intent to be updated:<br>
        <input id="selected-intent" type="text" list="intents" style="width: 500px;"></label> 
        <datalist id="intents" >
          {%for i in intents%} 
            <option value="{{i}}">
          {%endfor%} 
        </datalist>
        <button onclick="fetch()" class="fetch-btn" id="fetch-btn">Fetch</button>
        <br><br>

        <label>Current response:<br></label>
        <div id="content">
          ...
        </div>
        <br>
        <label>Input new response:<br>
        <textarea id="edited-response" type="text" rows="10" cols="80"></textarea></label> 
        <br><br>
        <input type="submit" value="Update Response">
    </form>

  </div>
 


<script src='https://use.fontawesome.com/releases/v5.0.13/js/all.js'></script>
<script>
  const updateForm = document.getElementById('update-form');
  const fetchButton = document.getElementById('fetch-btn');

  const selected_intent = document.getElementById("selected-intent");

  const content = document.getElementById("content");
  const edited = document.getElementById("edited-response");

  updateForm.addEventListener("submit", event => {
    event.preventDefault();

    updateResponse();
  });

  function fetch(){
    event.preventDefault()

    $.get("/getReply", { msg: selected_intent.value}).done(function (data) {
      content.innerHTML = data;
      content.value=data;
    });
  }

  function updateResponse(){
    event.preventDefault()
    console.log({ pattern: selected_intent.value, old:content.value, new:edited.value })
    $.get("/update", { pattern: selected_intent.value, old:content.value, new:edited.value }).done(function (data) {
      //console.log(rawText);
      //console.log(data);

      console.log(data)

    });
  }
</script>
</body>
</html>

